// SPDX-License-Identifier: GPL-3.0
pragma solidity 0.8.18;

contract WithdrawV1 {
    constructor() payable {}

    address public constant owner = 0x5B38Da6a701c568545dCfcB03FcB875f56beddC4;

    function withdraw() external {
        payable(owner).transfer(address(this).balance); // does the same thing as call
        // but hardcodes the gas() as 2300 (this was done to protect against reentrancy
        // but is considered now bad practice)
        (bool s, ) = payable(owner).call{value: address(this).balance}("");
        require(s);
    }
} // deploying this costs 176343 with bytecode :
// 0x608060405261023b806100136000396000f3fe608060405234801561001057600080fd5b50600436106100365760003560e01c80633ccfd60b1461003b5780638da5cb5b14610045575b600080fd5b610043610063565b005b61004d61014b565b60405161005a91906101a4565b60405180910390f35b735b38da6a701c568545dcfcb03fcb875f56beddc473ffffffffffffffffffffffffffffffffffffffff166108fc479081150290604051600060405180830381858888f193505050501580156100bd573d6000803e3d6000fd5b506000735b38da6a701c568545dcfcb03fcb875f56beddc473ffffffffffffffffffffffffffffffffffffffff16476040516100f8906101f0565b60006040518083038185875af1925050503d8060008114610135576040519150601f19603f3d011682016040523d82523d6000602084013e61013a565b606091505b505090508061014857600080fd5b50565b735b38da6a701c568545dcfcb03fcb875f56beddc481565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b600061018e82610163565b9050919050565b61019e81610183565b82525050565b60006020820190506101b96000830184610195565b92915050565b600081905092915050565b50565b60006101da6000836101bf565b91506101e5826101ca565b600082019050919050565b60006101fb826101cd565b915081905091905056fea26469706673582212200735b69e7f95062366ea0317a25f9c10abb73e67754ac63ca0927263b655ae7664736f6c63430008120033
// Or 590 bytes

contract WithdrawV2 {
    constructor() payable {}

    address public constant owner = 0x5B38Da6a701c568545dCfcB03FcB875f56beddC4;

    function withdraw() external {
        assembly {
            let s := call(gas(), owner, selfbalance(), 0, 0, 0, 0)
            if iszero(s) {
                revert(0, 0)
            }
        }
    }
}// This costs 116919 to deploy
// bytecode :
// 0x6080604052610127806100136000396000f3fe6080604052348015600f57600080fd5b506004361060325760003560e01c80633ccfd60b1460375780638da5cb5b14603f575b600080fd5b603d6059565b005b60456083565b6040516050919060d8565b60405180910390f35b60008060008047735b38da6a701c568545dcfcb03fcb875f56beddc45af180608057600080fd5b50565b735b38da6a701c568545dcfcb03fcb875f56beddc481565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b600060c482609b565b9050919050565b60d28160bb565b82525050565b600060208201905060eb600083018460cb565b9291505056fea2646970667358221220ca24bb4ef6790c555a6f7502235ada0b5b676506ba3a3a48e7632ff6e1bddd7064736f6c63430008120033
// Or 314 bytes